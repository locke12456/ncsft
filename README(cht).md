# Notion ç¨‹å¼ç¢¼æª”æ¡ˆåŒæ­¥å·¥å…·

ä¸€å€‹ç”¨æ–¼å°‡ç¨‹å¼ç¢¼å°ˆæ¡ˆæª”æ¡ˆè‡ªå‹•åŒæ­¥åˆ° Notion é é¢çš„ Python å·¥å…·ã€‚æ”¯æ´**é›™å‘åŒæ­¥**ã€å¢žé‡æ›´æ–°ã€ç›®éŒ„æŽƒæï¼Œä¸¦ç‚ºæ¯å€‹ç¨‹å¼ç¢¼æª”æ¡ˆå»ºç«‹ç¨ç«‹çš„ Notion é é¢ã€‚

## åŠŸèƒ½ç‰¹è‰²

ðŸ”„ **é›™å‘åŒæ­¥**: æŽ¨é€æª”æ¡ˆåˆ° Notionï¼Œä¹Ÿå¯ä»¥æ‹‰å–å›žæœ¬åœ°ç›®éŒ„

ðŸ“¥ **æ‹‰å–åŠŸèƒ½**: å¾ž Notion é é¢æå–ç¨‹å¼ç¢¼å›žåˆ°æœ¬åœ°æª”æ¡ˆ

ðŸ“ **å°ˆæ¡ˆåˆ¥é…ç½®**: æ¯å€‹å°ˆæ¡ˆå¯æ“æœ‰ç¨ç«‹çš„ .env è¨­å®šæª”

ðŸ“„ **ç¨ç«‹é é¢**: ç‚ºæ¯å€‹ç¨‹å¼ç¢¼æª”æ¡ˆå»ºç«‹ç¨ç«‹çš„ Notion é é¢

ðŸš€ **ä¸»å‹•åŒæ­¥**: é¡žä¼¼ Git çš„æ‰‹å‹•åŒæ­¥æ©Ÿåˆ¶ - ä½ æ±ºå®šä½•æ™‚åŒæ­¥

ðŸ’¾ **æ™ºæ…§å¿«å–ç³»çµ±**: å°ˆæ¡ˆåˆ¥å¿«å–æª”æ¡ˆé¿å…é‡è¤‡ä¸Šå‚³

ðŸ **Python å¯¦ä½œ**: ä½¿ç”¨å®˜æ–¹ Notion API é€²è¡Œè‡ªå‹•åŒ–æ“ä½œ

ðŸŒ **å¤šèªžè¨€æ”¯æ´**: æ”¯æ´ 30+ ç¨®ç¨‹å¼èªžè¨€å’Œæª”æ¡ˆé¡žåž‹

## æ”¯æ´çš„ç¨‹å¼èªžè¨€

- **Python** (.py)
- **C#** (.cs)
- **JavaScript** (.js, .jsx)
- **TypeScript** (.ts, .tsx)
- **Java** (.java)
- **C/C++** (.c, .cpp)
- **PHP** (.php)
- **Ruby** (.rb)
- **Go** (.go)
- **Rust** (.rs)
- **Swift** (.swift)
- **Kotlin** (.kt)
- **Scala** (.scala)
- **HTML/CSS** (.html, .css, .scss, .sass, .less)
- **Shell Scripts** (.sh, .bash, .ps1, .bat, .cmd)
- **è¨­å®šæª”** (.json, .yaml, .yml, .xml)
- **é‚„æœ‰æ›´å¤š...**

## å®‰è£èˆ‡è¨­å®š

### 1. å®‰è£ä¾è³´å¥—ä»¶

```bash
pip install -r requirements.txt
```

### 2. ç’°å¢ƒè®Šæ•¸è¨­å®š

å·¥å…·æ”¯æ´**å°ˆæ¡ˆåˆ¥é…ç½®**ã€‚å®ƒæœƒè‡ªå‹•åœ¨å°ˆæ¡ˆç›®éŒ„éšŽå±¤ä¸­å°‹æ‰¾ `.env` æª”æ¡ˆã€‚

è¤‡è£½ `.env.example` ç‚º `.env` ä¸¦å¡«å…¥å¿…è¦è³‡è¨Šï¼š

```bash
cp .env.example .env
```

ç·¨è¼¯ `.env` æª”æ¡ˆï¼š

```
NOTION_TOKEN=your_notion_integration_token
PARENT_PAGE_ID=your_parent_page_id
PROJECT_ROOT=./your_project_path
MAX_CONTENT_LENGTH=100000
CACHE_FILE=.notion_sync_cache.json
```

### 3. å–å¾— Notion Integration Token

1. å‰å¾€ [Notion Integrations](https://www.notion.so/my-integrations)
2. é»žæ“Šã€ŒNew integrationã€
3. å¡«å…¥åç¨±ï¼ˆä¾‹å¦‚ï¼šã€ŒCode File Syncã€ï¼‰
4. é¸æ“‡ workspace
5. è¤‡è£½ Internal Integration Token

### 4. å–å¾—çˆ¶é é¢ ID

1. åœ¨ Notion ä¸­å»ºç«‹ä¸€å€‹æ–°é é¢ï¼ˆæˆ–ä½¿ç”¨ç¾æœ‰é é¢ï¼‰
2. é‚€è«‹ä½ çš„ Integration åˆ°è©²é é¢
3. å¾žé é¢ URL ä¸­å–å¾—é é¢ ID

## ä½¿ç”¨æ–¹å¼

å·¥å…·ç¾åœ¨æ”¯æ´**å­æŒ‡ä»¤**é€²è¡Œä¸åŒæ“ä½œï¼š

### æŽ¨é€æª”æ¡ˆåˆ° Notion

```bash
# æŽ¨é€ç•¶å‰ç›®éŒ„æ‰€æœ‰æª”æ¡ˆ
python [main.py](http://main.py) push ./

# å¼·åˆ¶æŽ¨é€ï¼ˆæ›´æ–°æ‰€æœ‰æª”æ¡ˆï¼Œå¿½ç•¥è®Šæ›´æª¢æŸ¥ï¼‰
python [main.py](http://main.py) push ./ -f

# åªæŽ¨é€ç‰¹å®šèªžè¨€æª”æ¡ˆ
python [main.py](http://main.py) push ./ -l python

# æŽ¨é€ç‰¹å®šå‰¯æª”å
python [main.py](http://main.py) push ./ -e .py .js .css
```

### å¾ž Notion æ‹‰å–æª”æ¡ˆ

```bash
# æ‹‰å–æ‰€æœ‰å·²åŒæ­¥æª”æ¡ˆ
python [main.py](http://main.py) pull ./

# å¼·åˆ¶æ‹‰å–ä¸¦è¦†å¯«ç¾æœ‰æœ¬åœ°æª”æ¡ˆ
python [main.py](http://main.py) pull ./ -f

# æ‹‰å–åˆ°æŒ‡å®šè¼¸å‡ºç›®éŒ„
python [main.py](http://main.py) pull ./ -o ./pulled_code

# æ‹‰å–åˆ°æŒ‡å®šç›®éŒ„ä¸¦å¼·åˆ¶è¦†å¯«
python [main.py](http://main.py) pull ./ -o ./pulled_code -f
```

### å°ˆæ¡ˆçµ±è¨ˆè³‡è¨Š

```bash
# é¡¯ç¤ºå°ˆæ¡ˆåŒæ­¥çµ±è¨ˆ
python [main.py](http://main.py) stats ./
```

### å¿«å–ç®¡ç†

```bash
# æ¸…ç†å·²åˆªé™¤æª”æ¡ˆçš„å¿«å–è¨˜éŒ„
python [main.py](http://main.py) clean ./
```

### æŒ‡ä»¤åƒè€ƒ

### Push æŒ‡ä»¤é¸é …

- `-f, --force` - å¼·åˆ¶æ›´æ–°æ‰€æœ‰æª”æ¡ˆï¼ˆå¿½ç•¥ hash æ¯”å°ï¼‰
- `-l, --language` - åªåŒæ­¥ç‰¹å®šèªžè¨€ï¼ˆå¦‚ python, javascriptï¼‰
- `-e, --extensions` - åŒæ­¥ç‰¹å®šå‰¯æª”åï¼ˆå¦‚ .py .jsï¼‰

### Pull æŒ‡ä»¤é¸é …

- `-f, --force` - å¼·åˆ¶è¦†å¯«ç¾æœ‰æœ¬åœ°æª”æ¡ˆ
- `-o, --output` - æŒ‡å®šè¼¸å‡ºç›®éŒ„ï¼ˆé è¨­ï¼š{å°ˆæ¡ˆå}_from_notionï¼‰

### èªªæ˜Ž

```bash
python [main.py](http://main.py) --help
python [main.py](http://main.py) push --help
python [main.py](http://main.py) pull --help
```

## å·¥ä½œåŽŸç†

### Push æ“ä½œ

1. **é…ç½®è¼‰å…¥**: å¾žå°ˆæ¡ˆç›®éŒ„éšŽå±¤ä¸­å°‹æ‰¾ä¸¦è¼‰å…¥ .env
2. **æŽƒæéšŽæ®µ**: éžè¿´æŽƒææŒ‡å®šç›®éŒ„ä¸­çš„æ‰€æœ‰æ”¯æ´ç¨‹å¼ç¢¼æª”æ¡ˆ
3. **è®Šæ›´æª¢æ¸¬**: è¨ˆç®—æª”æ¡ˆçš„ MD5 hashï¼Œèˆ‡æœ¬åœ°å¿«å–æ¯”å°
4. **åŒæ­¥è™•ç†**:
    - å»ºç«‹æ–°é é¢ï¼ˆå¦‚æžœæª”æ¡ˆæ˜¯æ–°å¢žçš„ï¼‰
    - æ›´æ–°ç¾æœ‰é é¢ï¼ˆå¦‚æžœæª”æ¡ˆæœ‰è®Šæ›´ï¼‰
    - è·³éŽæœªè®Šæ›´çš„æª”æ¡ˆï¼ˆæé«˜æ•ˆçŽ‡ï¼‰
5. **å¿«å–æ›´æ–°**: æ›´æ–°å°ˆæ¡ˆç‰¹å®šçš„åŒæ­¥å¿«å–æª”æ¡ˆ

### Pull æ“ä½œ

1. **å¿«å–è¼‰å…¥**: è¼‰å…¥å°ˆæ¡ˆç‰¹å®šçš„å¿«å–ä»¥å°‹æ‰¾åŒæ­¥é é¢
2. **å…§å®¹æå–**: å¾ž Notion é é¢å–å¾—ç¨‹å¼ç¢¼å…§å®¹
3. **æª”æ¡ˆå»ºç«‹**: ç”¨æå–çš„å…§å®¹é‡å»ºæœ¬åœ°æª”æ¡ˆ
4. **è¦†å¯«ä¿è­·**: é™¤éžä½¿ç”¨ force æ——æ¨™ï¼Œå¦å‰‡è·³éŽç¾æœ‰æª”æ¡ˆ

## é é¢çµæ§‹

å·¥å…·æœƒå»ºç«‹åŒ…å«ä»¥ä¸‹çµæ§‹çš„ Notion é é¢ï¼š

- **æª”æ¡ˆæ¨™é¡Œ**: æª”æ¡ˆåœ–ç¤ºå’Œåç¨±
- **æª”æ¡ˆè³‡è¨Š**: è·¯å¾‘ã€ç¨‹å¼èªžè¨€å’Œæª”æ¡ˆå¤§å°
- **ç¨‹å¼ç¢¼å…§å®¹**: å…·å‚™èªžæ³•é«˜äº®çš„ç¨‹å¼ç¢¼å€å¡Š
- **åˆ†æ®µå…§å®¹**: å¤§åž‹æª”æ¡ˆæœƒè‡ªå‹•åˆ†å‰²æˆå¤šå€‹ç¨‹å¼ç¢¼å€å¡Šï¼ˆå— Notion API é™åˆ¶ï¼‰

## å°ˆæ¡ˆçµæ§‹

```
ncsft/
â”œâ”€â”€ [README.md](http://README.md)                    # è‹±æ–‡èªªæ˜Žæ–‡ä»¶
â”œâ”€â”€ README(cht).md              # ä¸­æ–‡èªªæ˜Žæ–‡ä»¶
â”œâ”€â”€ requirements.txt            # Python ä¾è³´å¥—ä»¶
â”œâ”€â”€ .env.example               # ç’°å¢ƒè®Šæ•¸ç¯„æœ¬
â”œâ”€â”€ .gitignore                 # Git å¿½ç•¥è¦å‰‡
â”œâ”€â”€ [config.py](http://config.py)                  # å…·å‹•æ…‹ .env è¼‰å…¥çš„é…ç½®ç®¡ç†
â”œâ”€â”€ notion_[sync.py](http://sync.py)             # æ ¸å¿ƒåŒæ­¥é‚è¼¯ï¼ˆçµ±ä¸€ç‰ˆæœ¬ï¼‰
â”œâ”€â”€ [main.py](http://main.py)                    # å…·å­æŒ‡ä»¤çš„å‘½ä»¤åˆ—ä»‹é¢
â”œâ”€â”€ block_[merger.py](http://merger.py)            # å€å¡Šåˆä½µå·¥å…·
â”œâ”€â”€ test_notion_[sync.py](http://sync.py)        # æ¸¬è©¦æª”æ¡ˆ
â””â”€â”€ .notion_sync_cache.json    # æœ¬åœ°å¿«å–ï¼ˆè‡ªå‹•ç”¢ç”Ÿï¼Œä¾å°ˆæ¡ˆï¼‰
```

## é€²éšŽåŠŸèƒ½

### å°ˆæ¡ˆåˆ¥é…ç½®

- æ¯å€‹å°ˆæ¡ˆç›®éŒ„å¯æ“æœ‰ç¨ç«‹çš„ `.env` æª”æ¡ˆ
- å·¥å…·æœƒå‘ä¸Šæœå°‹ç›®éŒ„æ¨¹å°‹æ‰¾ `.env` æª”æ¡ˆ
- æ”¯æ´ä¸åŒå°ˆæ¡ˆä½¿ç”¨ä¸åŒçš„ Notion token å’Œçˆ¶é é¢

### æ™ºæ…§å¿«å–

- å¿«å–æª”æ¡ˆä¾å°ˆæ¡ˆç›®éŒ„å„²å­˜
- è®“å¤šå°ˆæ¡ˆèƒ½ç¨ç«‹åŒæ­¥
- è‡ªå‹•æ¸…ç†å·²åˆªé™¤æª”æ¡ˆçš„å¿«å–è¨˜éŒ„

### é›™å‘å·¥ä½œæµç¨‹

1. **é–‹ç™¼**: åœ¨æœ¬åœ°é€²è¡Œç¨‹å¼ç¢¼é–‹ç™¼
2. **æŽ¨é€**: `python [main.py](http://main.py) push ./ -f` - åŒæ­¥åˆ° Notion é€²è¡Œæ–‡ä»¶åŒ–/åˆ†äº«
3. **å”ä½œ**: å…¶ä»–äººå¯åœ¨ Notion ä¸­æª¢è¦–/ç·¨è¼¯ç¨‹å¼ç¢¼
4. **æ‹‰å–**: `python [main.py](http://main.py) pull ./ -f` - æå–æ›´æ–°çš„ç¨‹å¼ç¢¼å›žåˆ°æœ¬åœ°

## æ³¨æ„äº‹é …

- ç¢ºä¿ Notion Integration æœ‰å°ç›®æ¨™é é¢çš„å¯«å…¥æ¬Šé™
- å¤§åž‹å°ˆæ¡ˆé¦–æ¬¡åŒæ­¥å¯èƒ½éœ€è¦è¼ƒé•·æ™‚é–“
- æ¯å€‹å°ˆæ¡ˆç¶­è­·è‡ªå·±çš„å¿«å–æª”æ¡ˆä»¥é€²è¡Œç¨ç«‹è¿½è¹¤
- Pull æ“ä½œéœ€è¦å…ˆå‰çš„ push æ“ä½œä¾†å»ºç«‹é é¢å°æ‡‰é—œä¿‚
- æ”¯æ´çš„æª”æ¡ˆç·¨ç¢¼ï¼šUTF-8
- å¤§åž‹æª”æ¡ˆæœƒå›  Notion API é™åˆ¶è€Œè‡ªå‹•åˆ†æ®µ

## å¸¸è¦‹å•é¡Œ

**Q: å¦‚ä½•å¿½ç•¥ç‰¹å®šç›®éŒ„ï¼Ÿ**

A: åœ¨ [`config.py`](http://config.py) ä¸­ä¿®æ”¹ `IGNORE_PATTERNS` æ¸…å–®

**Q: åŒæ­¥å¤±æ•—æ€Žéº¼è¾¦ï¼Ÿ**

A: æª¢æŸ¥ç¶²è·¯é€£ç·šå’Œ Notion API æ¬Šé™ï¼ŒæŸ¥çœ‹éŒ¯èª¤è¨Šæ¯

**Q: å¯ä»¥åŒæ­¥å…¶ä»–ç¨‹å¼èªžè¨€å—Žï¼Ÿ**

A: å¯ä»¥ï¼Œåœ¨ [`config.py`](http://config.py) ä¸­ä¿®æ”¹ `SUPPORTED_LANGUAGES` å­—å…¸

**Q: å¦‚ä½•è™•ç†ç·¨ç¢¼å•é¡Œï¼Ÿ**

A: å·¥å…·æœƒè‡ªå‹•å˜—è©¦ UTF-8 å’Œ GBK ç·¨ç¢¼ã€‚å…¶ä»–ç·¨ç¢¼å¯èƒ½éœ€è¦æ‰‹å‹•è½‰æ›

**Q: Pull æŒ‡ä»¤é¡¯ç¤ºã€Œæ‰¾ä¸åˆ°åŒæ­¥å¿«å–ã€ï¼Ÿ**

A: ä½ éœ€è¦å…ˆæŽ¨é€æª”æ¡ˆä»¥åœ¨å¿«å–ä¸­å»ºç«‹é é¢å°æ‡‰é—œä¿‚

**Q: å¦‚ä½•åœ¨ä¸åŒå°ˆæ¡ˆä½¿ç”¨ä¸åŒçš„ Notion å·¥ä½œå€ï¼Ÿ**

A: åœ¨æ¯å€‹å°ˆæ¡ˆç›®éŒ„å»ºç«‹ç¨ç«‹çš„ `.env` æª”æ¡ˆï¼ŒåŒ…å«ä¸åŒçš„ `NOTION_TOKEN` å’Œ `PARENT_PAGE_ID`

## ä½¿ç”¨ç¯„ä¾‹

### åŸºæœ¬å·¥ä½œæµç¨‹

```bash
# è¨­å®šå°ˆæ¡ˆ
cd /path/to/your/project
cp /path/to/tool/.env.example .env
# ç·¨è¼¯ .env å¡«å…¥ä½ çš„ Notion æ†‘è­‰

# æŽ¨é€æ‰€æœ‰ Python æª”æ¡ˆåˆ° Notion
python /path/to/tool/[main.py](http://main.py) push ./ -l python

# æ‹‰å–æ‰€æœ‰æª”æ¡ˆå›žä¾†ï¼ˆä¾‹å¦‚åœ¨ Notion ç·¨è¼¯å¾Œï¼‰
python /path/to/tool/[main.py](http://main.py) pull ./ -o ./from_notion

# æª¢æŸ¥åŒæ­¥çµ±è¨ˆ
python /path/to/tool/[main.py](http://main.py) stats ./
```

### å¤šå°ˆæ¡ˆè¨­å®š

```bash
# å°ˆæ¡ˆ A
cd /path/to/projectA
echo "NOTION_TOKEN=token_a\nPARENT_PAGE_ID=page_a" > .env
python /path/to/tool/[main.py](http://main.py) push ./

# å°ˆæ¡ˆ B
cd /path/to/projectB
echo "NOTION_TOKEN=token_b\nPARENT_PAGE_ID=page_b" > .env
python /path/to/tool/[main.py](http://main.py) push ./
```

## æŽˆæ¬Š

MIT License